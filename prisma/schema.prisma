generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

enum SocialPlatform {
  twitter
  facebook
  instagram
  youtube
  tiktok
  bluesky
  mastodon
  threads
  linkedin
  other
}

model Association {
  id           String   @id @default(cuid())
  name         String   @unique
  slug         String   @unique
  summary      String   @default("")
  color        String   @default("#111827")
  description  String   @default("")
  logoUrl      String?
  contactEmail String?
  phone        String?
  website      String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  socials SocialLink[]
}

model SocialLink {
  id String @id @default(cuid())

  // relation to Association
  associationId String
  association   Association @relation(fields: [associationId], references: [id], onDelete: Cascade)

  platform SocialPlatform
  url      String         @unique

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Enforce one link per platform per association
  @@unique([associationId, platform])
  // Helpful indexes
  @@index([associationId])
  @@index([platform])
}
